% omf.sty -- Pretty printing wrapper for O'Mega Model Files
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\omf@listmode{%
  \def\charged##1##2{(\ensuremath{##1},\ensuremath{##2})}%
  \def\neutral##1{\ensuremath{##1}}%
  \def\tex##1{\ensuremath{\text{\TeX}: ##1}}%
  \def\fortran##1{\texttt{Fortran}: \texttt{##1}}%
  \def\alias##1{alias: \texttt{##1}}%
  \def\anti##1##2{%
    \ifx##1\tex
      \ensuremath{\overline{\text{\TeX}}: ##2}%
    \else
      \ifx##1\fortran
        \ensuremath{\overline{\text{\texttt{Fortran}}}: \texttt{##2}}%
      \else
        \ifx##1\alias
          \ensuremath{\overline{\text{alias}}: ##2}%
        \else
          \errmessage{anti must be followed by tex, fortran or alias!}
        \fi
      \fi
    \fi}}
\newenvironment{omflist}%
  {\omf@listmode}%
  {}%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newif\ifomf@tab@aliases
\newif\ifomf@tab@antialiases
\newtoks\omf@tab@aliases
\newtoks\omf@tab@antialiases
\def\omf@tab@clearparticle{%
  \global\let\omf@tab@neutral\relax
  \global\let\omf@tab@charged\relax
  \global\let\omf@tab@anti\relax
  \global\let\omf@tab@spin\relax
  \global\let\omf@tab@color\relax
  \global\let\omf@tab@charge\relax
  \global\let\omf@tab@mass\relax
  \global\let\omf@tab@width\relax
  \global\let\omf@tab@tex\relax
  \global\let\omf@tab@antitex\relax
  \global\let\omf@tab@fortran\relax
  \global\let\omf@tab@antifortran\relax
  \global\omf@tab@aliases={}%
  \global\omf@tab@aliasesfalse
  \global\omf@tab@antialiases={}%
  \global\omf@tab@antialiasesfalse}
\def\omf@tab@amp{&}% Why???
\def\omf@tab@makerow@{%
  & \ifx\omf@tab@spin\relax?\else\ensuremath{\omf@tab@spin}\fi
  & \ifx\omf@tab@color\relax?\else\ensuremath{\omf@tab@color}\fi
  & \ifx\omf@tab@charge\relax?\else\ensuremath{\omf@tab@charge}\fi
  & \ifx\omf@tab@mass\relax?\else\ensuremath{\omf@tab@mass}\fi
  & \ifx\omf@tab@width\relax?\else\ensuremath{\omf@tab@width}\fi
  & \ifx\omf@tab@tex\relax?\else\ensuremath{\omf@tab@tex}\fi
  & \ifx\omf@tab@anti\relax---\else\ensuremath{\omf@tab@antitex}\fi
  & \ifx\omf@tab@fortran\relax?\else\texttt{\omf@tab@fortran}\fi
  & \ifx\omf@tab@anti\relax---\else\texttt{\omf@tab@antifortran}\fi
  & \ifomf@tab@aliases\textit{\the\omf@tab@aliases}\else---\fi
  & \ifomf@tab@antialiases\textit{\the\omf@tab@antialiases}\else---\fi \\
  \omf@tab@clearparticle\ignorespaces}
\def\omf@tab@makerow{%
   \ifx\omf@tab@neutral\relax
     \ifx\omf@tab@charged\relax
     \else
       \ensuremath{\omf@tab@charged}\omf@tab@amp\ensuremath{\omf@tab@anti}%
       \omf@tab@makerow@
     \fi
   \else
       \ensuremath{\omf@tab@neutral}\omf@tab@amp ---
     \omf@tab@makerow@
   \fi}
\def\omf@tabularmode{%
  \gdef\charged##1##2{%
    \omf@tab@makerow
    \gdef\omf@tab@charged{##1}%
    \gdef\omf@tab@anti{##2}%
    \ignorespaces}%
  \gdef\neutral##1{%
    \omf@tab@makerow
    \gdef\omf@tab@neutral{##1}%
    \ignorespaces}%
  \gdef\spin##1{\gdef\omf@tab@spin{##1}\ignorespaces}%
  \gdef\color##1{\gdef\omf@tab@color{##1}\ignorespaces}%
  \gdef\colorgroup##1{\gdef\omf@tab@colorgroup{##1}\ignorespaces}%
  \gdef\flavor##1{\gdef\omf@tab@flavor{##1}\ignorespaces}%
  \gdef\flavorgroup##1{\gdef\omf@tab@flavorgroup{##1}\ignorespaces}%
  \gdef\charge##1{\gdef\omf@tab@charge{##1}\ignorespaces}%
  \gdef\mass##1{\gdef\omf@tab@mass{##1}\ignorespaces}%
  \gdef\width##1{\gdef\omf@tab@width{##1}\ignorespaces}%
  \gdef\tex##1{\gdef\omf@tab@tex{##1}\ignorespaces}%
  \gdef\fortran##1{\gdef\omf@tab@fortran{##1}\ignorespaces}%
  \gdef\alias##1{%
     \ifomf@tab@aliases
       \global\omf@tab@aliases=%
         \expandafter{\the\omf@tab@aliases, ##1}%
     \else
       \global\omf@tab@aliases={##1}%
       \global\omf@tab@aliasestrue
     \fi
     \ignorespaces}%
  \gdef\anti##1##2{%
    \ifx##1\tex
      \gdef\omf@tab@antitex{##2}%
    \else
      \ifx##1\fortran
        \gdef\omf@tab@antifortran{##2}%
      \else
        \ifx##1\alias
          \ifomf@tab@antialiases
            \global\omf@tab@antialiases=%
              \expandafter{\the\omf@tab@antialiases, ##2}%
          \else
            \global\omf@tab@antialiases={##2}%
            \global\omf@tab@antialiasestrue
          \fi
        \else
          \errmessage{anti must be followed by tex, fortran or alias!}%
        \fi
      \fi
    \fi
    \ignorespaces}%
  \omf@tab@clearparticle}

\newenvironment{omftable}%
  {\omf@tabularmode
   \begin{tabular}{cc|c|c|c|c|c|cc|cc|cc}%
      \multicolumn{2}{l|}{O'Mega}%
    & spin & color & $Q$ & $M$ & $\Gamma$
    & \multicolumn{2}{|l|}{\TeX}%
    & \multicolumn{2}{|l|}{\texttt{Fortran}}%
    & \multicolumn{2}{|l}{alias(es)}\\\hline
   \ignorespaces}
  {\omf@tab@makerow
   \end{tabular}}%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\omf@listmode
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\index}[1]{\relax}
\newcommand{\lorentz}[1]{\relax}
\newcommand{\vertex}[1]{#1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\endinput
