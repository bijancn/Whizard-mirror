# SINDARIN file for WHIZARD self test
# Input file for testing user defined amplitudes

?logging = true
?openmp_logging = false
?vis_history = false
?integration_timer = false

!!! Tests should be run single-threaded 
openmp_num_threads = 1

model = SM_tt_threshold
sqrts = 400 GeV
sqrtsmin = sqrts - 5 GeV
sqrtsmax = sqrts + 5 GeV
sqrtsstepsize = 0.1 GeV
m1S = 172 GeV

mZ = 91.188
mW = 80.419
mb = 4.2
alphas = 0.118 ! (Z pole, NLL running to mu_h)
alpha_em_i = 125.924 ! (not running)
m1S = 172.0
phs_t_channel = 0

nloop  = 1 # NLL
sh     = 1.
sf     = 1.
Vtb    = 1.
FF     = 1 # NRQCD resummed

me = 0
iterations = 1:1000
iterations = 1:1000

$born_me_method = "threshold"
$loop_me_method = "threshold"
$correlation_me_method = "threshold"
$real_tree_me_method = "threshold"
offshell_strategy = -2
alpha_power = 4
alphas_power = 0

seed = 0
process extra_nlo_threshold_p1 = e1, E1 => Wp, Wm, b, B
!integrate (extra_nlo_threshold_p1)

seed = 0
process extra_nlo_threshold_p2 = e1, E1 => Wp, Wm, b, B {nlo_calculation = "Born"}
!integrate (extra_nlo_threshold_p2)

!expect (integral (extra_nlo_threshold_p1) ==
  !integral (extra_nlo_threshold_p2)) {tolerance = 0.0001}

process extra_nlo_threshold_p3 = e1, E1 => Wp, Wm, b, B {nlo_calculation = "Real"}
!integrate (extra_nlo_threshold_p3)

process extra_nlo_threshold_p4 = e1, E1 => Wp, Wm, b, B {nlo_calculation = "Virtual"}
!integrate (extra_nlo_threshold_p4)

process extra_nlo_threshold_p5 = e1, E1 => Wp, Wm, b, B {nlo_calculation = "Full"}
integrate (extra_nlo_threshold_p5)
