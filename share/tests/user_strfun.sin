# $Id: user_strfun.sin 4073 2013-02-12 13:42:18Z jr_reuter $
# SINDARIN file for WHIZARD self test
# Input file for testing injecting user code

?logging = true
?openmp_logging = false
?vis_history = false
?integration_timer = false

$method = "omega"
process user_strfun_p = e1, E1 => e2, E2

!!! Tests should be run single-threaded 
openmp_num_threads = 1

me = 0
sqrts = 500
iterations = 1:10000

# All runs should give an exactly identical result...
tolerance = 1e-12
real res = 0

# Standard way of specifying cuts
cuts = all Pt > 50 [e2:E2]

# Escan structure function
beams = e1, E1 => energy_scan
seed = 0
integrate (user_strfun_p)
res = integral (user_strfun_p)

# User structure function
beams = e1, E1 => user_strfun ("escan")
seed = 0
integrate (user_strfun_p)
expect (integral (user_strfun_p) == res)
 
